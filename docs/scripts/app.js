(()=>{function a(a,t){a&&t&&$.getJSON(`data/${t}?cache=`+Date.now()).done(function(t){a.empty();let e=[];for(let a=0;a<5;a++){let a=t.splice(Math.random()*t.length|0,1);e.push(a[0])}e.forEach(function(t){let e=t.question.split("####"),n=`<span class="question-line">${e[0]}</span>\n                                    <input type="text" class="user-input form-control" placeholder="answer">\n                                    <span class="question-line">${e[1]}</span>`,s=`<div class="question-item form-group">\n                        <div class="question" data-answer="${t.correctAnswer}">\n                            ${n}\n                        </div>\n                        <div class="common-mistakes hidden">\n                            ${function(a){let t="";return a.forEach(function(a){t+=`<div class="answer hidden" data-answer="${a.incorrectAnswer}">${a.explanation}</div>`}),t}(t.commonMistakes)}\n                        </div>\n                        <div class="answer generic hidden">\n                            ${t.explanation}\n                        </div>\n                    </div>`;a.append(s)})}).fail(function(a,t,e){console.log(t,e)})}function t(a,t){let e=!1;return a.forEach(function(a){a.toUpperCase()==t.toUpperCase()&&(e=!0)}),e}function e(a,t){if(!a||!t)return;$.getJSON(`data/${t}?cache=`+Date.now()).done(function(a){let t=a.splice(Math.random()*a.length|0,1);"old"==$(".translation-button").attr("data-language")?($(".flashcard").html(`<h2>${t[0].oldEnglish}</h2>`),$(".flashcard").data("flashcardAnswer",t[0].modernEnglish),$(".flashcard").data("partOfSpeech",t[0].partOfSpeech)):($(".flashcard").html(`<h2>${t[0].modernEnglish}</h2>`),$(".flashcard").data("flashcardAnswer",t[0].oldEnglish),$(".flashcard").data("partOfSpeech",t[0].partOfSpeech))});let e=$(".explanatory-text").attr("data-text");$(".flashcard").empty().removeClass("correct-flashcard incorrect-flashcard"),$(".explanatory-text").removeClass("darkorange-text darkgreen-text").html(e),$(".flashcard-row").find("input").val("")}$(document).ready(function(){let e,n=$("#question-wrapper");const s=$("#question-wrapper");let l=s.data("question-file");a(s,l),$(".special-character").on("click",function(a){a.preventDefault(),e&&e.val(e.val()+$(this).attr("data-char")).focus()}),n.on("focus","input",function(){e=$(this)}),$(".flashcard-row").on("focus","input",function(){e=$(this)}),$(".audio-button").on("click",function(){$(this).next(".audio-link").get(0).play()}),$(".audio-svg").on("click",function(){let a=$(this).attr("id");$("#audio-"+a).get(0).play()}),$("#additionalbutton").on("click",function(){a($("#question-wrapper"),$(this).data("new-questions")),$(this).removeClass("light-button").addClass("solid-button"),$("#basicbutton").removeClass("solid-button").addClass("light-button active"),$("#again").data("new-questions")}),$("#basicbutton").on("click",function(){a($("#question-wrapper"),$(this).data("new-questions")),$(this).removeClass("light-button").addClass("solid-button"),$("#additionalbutton").removeClass("solid-button").addClass("light-button active"),$("#again").data("new-questions")}),$("#hide-submit").on("click",function(){$(".table-hide").toggle(),$(this).find("span").toggleClass("hide")}),$(".tooltip-header").each(function(){$(this).on("click",function(){$(this).closest(".grammar-tooltip").siblings(".grammar-tooltip").find(".card-body").addClass("hide"),$(this).next(".card-body").toggleClass("hide")})}),$("#submit").on("click",function(a){a.preventDefault(),$(this).addClass("hidden"),$("#again").removeClass("hidden"),$(".question").each(function(){let a=$(this).attr("data-answer").split("|"),e=$(this).find("input").val().trim(),n=t(a,e),s=null;n||$(this).siblings(".common-mistakes").find(".answer").each(function(){t([$(this).attr("data-answer")],e)&&(s=$(this))}),n?$(this).closest(".form-group").addClass("has-success").removeClass("has-error"):$(this).closest(".form-group").removeClass("has-success").addClass("has-error"),null!=s?s.removeClass("hidden").parent().removeClass("hidden"):$(this).siblings(".answer").removeClass("hidden")})}),$("#again").on("click",function(t){t.preventDefault();const e=$("#question-wrapper");let n;n=$("#additionalbutton").hasClass("active")?$("#additionalbutton").data("new-questions"):e.data("question-file"),$(this).addClass("hidden"),$("#submit").removeClass("hidden"),a(e,n)}),$("#questionnaire-button").on("click",function(t){t.preventDefault();const e=$("#question-wrapper");let n=e.data("question-file");$(this).removeClass("light-button").addClass("solid-button"),$("#table-quiz-button").removeClass("solid-button").addClass("light-button"),a(e,n),$("small").replaceWith("<small>In the textboxes below, fill out the fully declined version of the word in brackets.</small>"),$("#table-submit").replaceWith('<button class="solid-button button" id="submit">Check</button>'),$("#table-try-again").replaceWith('<button class="solid-button button hidden" id="again">Try Again?</button>')})}),$(".modal-button").on("click",function(){const a=$(".modal-body"),t=a.data("question-file");e(a,t)}),$(".flashcard-check").on("click",function(){let a=$(".flashcard-row").find("input").val().trim(),e=$(".flashcard").data("flashcardAnswer").split("|"),n=$(".flashcard").data("partOfSpeech"),s=t(e,a),l=e.join(" / ");$(".flashcard").append("<h3>"+n+"</h3>"),$(".flashcard").find("h2").append(" â€” "+l),1==s?($(".flashcard").addClass("correct-flashcard"),$(".explanatory-text").addClass("darkgreen-text").html("Good Job!")):($(".flashcard").addClass("incorrect-flashcard"),$(".explanatory-text").addClass("darkorange-text").html("Try Again!")),$(".flashcard-check").addClass("hide"),$(".try-another").removeClass("hide")}),$(".flashcard-answer").on("keydown",function(a){let t=$(".flashcard-check").hasClass("hide");13===a.keyCode&&!1===t&&(a.preventDefault(),$(".flashcard-check").click())}),$(".try-another").on("click",function(){$(".flashcard-check").removeClass("hide"),$(".try-another").addClass("hide");const a=$(".modal-body"),t=a.data("question-file");e(a,t)}),$(".translation-button").on("click",function(){const a=$(".modal-body"),t=a.data("question-file");let n=$(".translation-button").attr("data-language"),s=$(".explanatory-text").attr("data-text"),l=$(".flashcard-answer").data("old-placeholder"),o=$(".flashcard-answer").data("new-placeholder");$(".explanatory-text").removeClass("darkorange-text darkgreen-text").html(s),$(".flashcard-row").find("input").val(""),$(".flashcard-check").removeClass("hide"),$(".try-another").addClass("hide"),"old"==n?($(".translation-button").attr("data-language","modern"),$(".translation-button").html('Modern English <i class="fas fa-exchange-alt"></i> Old English'),$(".flashcard").empty().removeClass("correct-flashcard incorrect-flashcard"),$(".flashcard-answer").attr("placeholder",l),e(a,t)):($(".translation-button").attr("data-language","old"),$(".translation-button").html('Old English <i class="fas fa-exchange-alt"></i> Modern English'),$(".flashcard").empty().removeClass("correct-flashcard incorrect-flashcard"),$(".flashcard-answer").attr("placeholder",o),e(a,t))})})();